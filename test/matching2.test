/* Matching test of a single large path + path starting
at the middle of the first one, 
originated from the following model:

model matching1
  constant Integer N = 100000;
  Real a[N];
equation
  a[N/2] = 0;
  for i in 2:N loop
    a[i-1] + a[i] = 0;
  end for;
end matching1;
*/

N = 100000
N2 = 50000

V1 = 1
V2 = N-1+V1
V3 = N+V2

E1 = 1
E2 = N-1+E1
E3 = N-1+E2

off1d = N+N2-1
off3b = N-1
off2d = N-1
off3d = 1

  V %= {[1:1:V1], [V1+1:1:V2], [V2+1:1:V3]};
  Vmap %= <<{[1:1:V1]} -> 0*x+1, {[V1+1:1:V2]} -> 0*x+2, {[V2+1:1:V3]} -> 0*x+3>>; 
  map1 %= <<{[1:1:E1]} -> 1*x+0, {[E1+1:1:E2]} -> 1*x+0, {[E2+1:1:E3]} -> 1*x-off3b>>;
  map2 %= <<{[1:1:E1]} -> 1*x+off1d, {[E1+1:1:E2]} -> 1*x+off2d, {[E2+1:1:E3]} -> 1*x+off3d>>;
  Emap %= <<{[1:1:E1]} -> 0*x+1, {[E1+1:1:E2], [E2+1:1:E3]} -> 0*x+2>>;

matching(
  V %= {[1:1:V1], [V1+1:1:V2], [V2+1:1:V3]};
  Vmap %= <<{[1:1:V1]} -> 0*x+1, {[V1+1:1:V2]} -> 0*x+2, {[V2+1:1:V3]} -> 0*x+3>>; 
  map1 %= <<{[1:1:E1]} -> 1*x+0, {[E1+1:1:E2]} -> 1*x+0, {[E2+1:1:E3]} -> 1*x-off3b>>;
  map2 %= <<{[1:1:E1]} -> 1*x+off1d, {[E1+1:1:E2]} -> 1*x+off2d, {[E2+1:1:E3]} -> 1*x+off3d>>;
  Emap %= <<{[1:1:E1]} -> 0*x+1, {[E1+1:1:E2], [E2+1:1:E3]} -> 0*x+2>>;
  , 1
)
