// Matching test, with a cycle

V %= {[2:1:2], [3:1:3], [4:1:4], [5:1:5], [9:1:9], [10:1:10], [11:1:11], [12:1:12]};
Vmap %= <<{[2:1:2]} -> 0*x+1, {[3:1:3]} -> 0*x+2, {[4:1:4]} -> 0*x+3, {[5:1:5]} -> 0*x+4
  , {[9:1:9]} -> 0*x+9, {[10:1:10]} -> 0*x+10, {[11:1:11]} -> 0*x+11, {[12:1:12]} -> 0*x+12>>;
map1 %= <<{[1:1:1]} -> 1*x+9, {[2:1:2]} -> 1*x+8, {[3:1:3]} -> 1*x+8, {[4:1:4]} -> 1*x+6, {[5:1:5]} -> 1*x+4
  , {[6:1:6]} -> 1*x+3, {[7:1:7]} -> 1*x+2, {[8:1:8]} -> 1*x+3, {[9:1:9]} -> 1*x+3, {[10:1:10]} -> 1*x+2>>;
map2 %= <<{[1:1:1]} -> 1*x+3, {[2:1:2]} -> 1*x+1, {[3:1:3]} -> 1*x-1, {[4:1:4]} -> 1*x+1, {[5:1:5]} -> 1*x+0
  , {[6:1:6]} -> 1*x-2, {[7:1:7]} -> 1*x-4, {[8:1:8]} -> 1*x-5, {[9:1:9]} -> 1*x-5, {[10:1:10]} -> 1*x-8>>;
Emap %= <<{[1:1:1]} -> 0*x+1, {[2:1:2]} -> 0*x+2, {[3:1:3]} -> 0*x+3, {[4:1:4]} -> 0*x+4, {[5:1:5]} -> 0*x+5
  , {[6:1:6]} -> 0*x+6, {[7:1:7]} -> 0*x+7, {[8:1:8]} -> 0*x+8, {[9:1:9]} -> 0*x+9, {[10:1:10]} -> 0*x+10>>;

matching(
  V %= {[2:1:2], [3:1:3], [4:1:4], [5:1:5], [9:1:9], [10:1:10], [11:1:11], [12:1:12]};
  Vmap %= <<{[2:1:2]} -> 0*x+1, {[3:1:3]} -> 0*x+2, {[4:1:4]} -> 0*x+3, {[5:1:5]} -> 0*x+4
    , {[9:1:9]} -> 0*x+9, {[10:1:10]} -> 0*x+10, {[11:1:11]} -> 0*x+11, {[12:1:12]} -> 0*x+12>>;
  map1 %= <<{[1:1:1]} -> 1*x+9, {[2:1:2]} -> 1*x+8, {[3:1:3]} -> 1*x+8, {[4:1:4]} -> 1*x+6, {[5:1:5]} -> 1*x+4
    , {[6:1:6]} -> 1*x+3, {[7:1:7]} -> 1*x+2, {[8:1:8]} -> 1*x+3, {[9:1:9]} -> 1*x+3, {[10:1:10]} -> 1*x+2>>;
  map2 %= <<{[1:1:1]} -> 1*x+3, {[2:1:2]} -> 1*x+1, {[3:1:3]} -> 1*x-1, {[4:1:4]} -> 1*x+1, {[5:1:5]} -> 1*x+0
    , {[6:1:6]} -> 1*x-2, {[7:1:7]} -> 1*x-4, {[8:1:8]} -> 1*x-5, {[9:1:9]} -> 1*x-5, {[10:1:10]} -> 1*x-8>>;
  Emap %= <<{[1:1:1]} -> 0*x+1, {[2:1:2]} -> 0*x+2, {[3:1:3]} -> 0*x+3, {[4:1:4]} -> 0*x+4, {[5:1:5]} -> 0*x+5
    , {[6:1:6]} -> 0*x+6, {[7:1:7]} -> 0*x+7, {[8:1:8]} -> 0*x+8, {[9:1:9]} -> 0*x+9, {[10:1:10]} -> 0*x+10>>;
  , 1, 6
)
